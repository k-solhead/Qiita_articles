# Gitのまとめ  


## 1.ローカルリポジトリを置く場所を設定する  

```Git
git init
```

<br>

## 2.リポジトリを複製して作業開始

```Git
git clone [リモートリポジトリのURL]
```

リモートリポジトリ全体をローカルに複製するコマンドです。
コマンドを実行した階層の1つ下にディレクトリが作成され、その中にリポジトリが複製されます。

<br>

## 3.ファイルを変更・追加する

```Git
git add [ファイル名]
```

```Git
git add ..
```

```Git
git commit -m "[コミットメッセージ]"
```

コミットすると、リポジトリにコミットオブジェクトが作成されます。
コミットオブジェクトを超簡単に説明すると、更新者の情報や変更後のファイルが保存されているデータです。
Gitでは、１つの機能につき一つの`commit`を行うことが推奨されています。

<br>

## 4.差分をみる

```Git
git diff
```

インデックスに追加していない、ワーキングツリーでの変更箇所を確認するためのコマンド。
`git add`前に変更箇所を確認したい場合におすすめ

```Git
git diff --cached
```

インデックスに追加済みで、次のコミットに入る予定の変更箇所を確認するためのコマンド。
`git commit`前に変更箇所を確認したい場合におすすめ。

<br>

## 5.変更を取り消す

```Git
git checkout
```

ワークツリーへの変更取り消す（ファイルの状態が直前のコミットに戻る）

```Git
git reset
```

ステージングエリアへの変更`git add`を取り消す。

<br>

## 6.リモートリポジトリを変更する

```Git
git push origin [リモートブランチ名]
```

<br>

## 7.ブランチ

ファイルの変更や追加を複数の分岐で作業を行うためにbranchを作ります。
`mainブランチ`で保存しているファイルは、現在進行形で使用されています。
ブランチを分ける理由は、現在稼働しているソースコードに影響を与えることなく作業を行うためです。

<br>

## 8.新しいブランチを作る

```Git
git checkout -b <new branch>
```

ブランチを生やす時のポイントは、どのブランチを派生元にするかということです。
派生元を`git checkout -b <new branch> <from branch>`として指定することができます。
指定しなければ、現在作業しているブランチが`<from branch>`になります。
![branch1.gif](https://camo.qiitausercontent.com/0ff2cc267f4cfb152d66d585c8135358be9f9200/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f323931383233312f61376634393966392d626635652d306335382d316133352d3539636433653261346333302e706e67)

>ブランチは、実はコミット（厳密にいうとコミットオブジェクトのハッシュ値）のポインタです。新しいブランチを生やすということは、派生元のブランチがポイントしているコミットを、新しいブランチも同様にポイントすることを意味します。

<br>

## 9.ブランチで作業を進める

作業するブランチを移動することを`checkout`すると言います。
現在作業しているブランチのポインタを`HEAD`と呼びます。
つまり、`mainブランチ`から`developブランチ`移動するというのは`HEAD`を変えることを意味します。

![branch2.gif](https://camo.qiitausercontent.com/8eeb1d300537c1fde523a6d6d5b82450db8c45e8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f323931383233312f33613733373962312d376131632d333562612d303262652d3631396431336131393261642e706e67)

現在は、`Atr3ul`というコミットを両方のブランチが指しています。
先ほどは`second.txt`を`mainブランチ`でコミットして追加したので、`f27baz`というコミットからひとつ前に進んでいる状態です。
ここから、`developブランチ`で`second.txt`を変更し、新しいコミットを行うとします。

![branch3.gif](https://camo.qiitausercontent.com/7ddee4f5805fb2dad0a0db7356b9cc8e18047940/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f323931383233312f31616530616132322d346338642d343131622d623230652d6332393034376463646234642e706e67)

そうすると図のように、`m9sgle`という新しいコミットが作成され、`developブランチ`はそのコミットをポイントすることになりました。

現在の`HEAD`の位置（作業ブランチの位置）やファイルがどの段階まで作業を進めたか、あるいは誰がその作業を行なっているかの状態を`status`と言います。

__基本的に`main(master)`上で作業することはないので、行いたい作業単位でブランチを作成し、新しいコミットを作成していきましょう。__

## 10.マージ

枝分かれたブランチ同士を統合することを`merge`と言います。
基本的に、`mainブランチ`や`developブランチ`に対して統合を行なっていきます。
注意点は、「どのブランチ」が「どのブランチ」を統合(吸収)するかの主語を間違わないことです。
必ず、派生元のブランチに（`HEAD`を）移動して、派生先のブランチからの統合を行うことになります。

